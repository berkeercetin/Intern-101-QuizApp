<ion-content [fullscreen]="true">
  <div  id="carouselExample" class="carousel slide">
    <div class="carousel-inner">
      <ng-container *ngIf="this.route.snapshot.params['type']=='learning'">
        <div *ngFor="let word of words; let i = index " [ngClass]="{'carousel-item': true, 'active': i === 0}">
          <div class="card-container">
            <ion-card [ngClass]="isFlipped[i] ? 'flipped' : ''">
              <div class="card-inner">
                <ion-toolbar class="flipped" *ngIf="isFlipped[i]">
                  <ion-icon (click)="flipCard(i)" slot="end" name="reload-outline"></ion-icon>
                  <ion-icon slot="start" name="download-outline"></ion-icon>
                </ion-toolbar>
                <div class="front">
                  <ion-card-header>
                    <ion-card-title style="text-align: center;"><ion-icon (click)="speak()"
                        name="volume-high-outline"></ion-icon></ion-card-title>
                        <select (change)="changeVoice($event)">
                          <option *ngFor="let voice of voices" [value]="voice.name">{{voice.name}}</option>
                        </select>
                    <ion-card-title>{{word.wordName}}</ion-card-title>
                  </ion-card-header>
                  <ion-card-content>
                    <ion-button (click)="flipCard(i)">Flip Card</ion-button>
                  </ion-card-content>
                </div>
                <div class="back">
                  <ion-card-header>
                    <ion-card-title>{{word.wordName}}</ion-card-title>
                    <ion-card-subtitle>{{word.pronunciation}}</ion-card-subtitle>
                    <ion-card-title><i class="fa-solid fa-handshake"></i></ion-card-title>
                  </ion-card-header>
                  <ion-card-content>
                    <ion-label>Explantation:</ion-label>
                    <ion-label>{{word.explantation}}</ion-label>
                    <br>
                    <ion-label class="example"> Example : {{word.example}}</ion-label>
                  </ion-card-content>
                </div>
              </div>
            </ion-card>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="this.route.snapshot.params['type']=='quiz' && questionLoading">
        <div *ngFor="let question of questions; let i = index " [ngClass]="{'carousel-item': true, 'active': i === 0}">
          <div class="card-container">
            <ion-card>
              <ion-card-header>
                <ion-card-subtitle>{{question.word?.wordName}} kelimesinin Türkçe karşılığı aşağıdakilerden hangisidir 
                  ?</ion-card-subtitle>
              </ion-card-header>
              <ion-card-content>
                <ion-grid>
                  <ion-radio-group  [(ngModel)]="selectedAnswer" >
                    <div *ngFor="let answer of question.answers ">
                      <ion-row>
                        <ion-col size="12">
                          <ion-radio labelPlacement="end" [value]="answer">{{ answer }}</ion-radio>
                        </ion-col>
                      </ion-row>
                    </div>
                  </ion-radio-group>
                </ion-grid>
                <ion-toolbar>
                  <ion-buttons slot="start">
                    <ion-button (click)="checkAnswer(true)">GEÇ</ion-button>
                  </ion-buttons>
                  <ion-buttons slot="end">
                    <ion-button style="text-align: end;" (click)="checkAnswer(false)" id="open-modal" >Kontrol Et</ion-button>
                  </ion-buttons>
                </ion-toolbar>
                
              </ion-card-content>
            </ion-card>
          </div>
        </div>
      </ng-container>
    </div>
    <button [ngStyle]="{'display': (type === 'quiz') ? 'none' : 'block'}" (click)="backCard()" class="carousel-control-prev" type="button" data-bs-target="#carouselExample"
      data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button [ngStyle]="{'display': (type === 'quiz') ? 'none' : 'block'}"  #nextButton (click)="nextCard()"  class="carousel-control-next" type="button" data-bs-target="#carouselExample"
      data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</ion-content>